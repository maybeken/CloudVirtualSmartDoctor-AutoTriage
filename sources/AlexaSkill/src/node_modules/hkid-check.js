var hkidCheck = function(input) {
    var checkSum;
    var sum = 0;
    var length = input.length;

    if(isLetter(input[0]) && length >= 8 && length <= 9){
        if(isLetter(input[1])){
            sum += charToInt(input[0].toLowerCase()) * 9;
        }else{
            sum += 36*9;
        }

        sum += charToInt(input[length-8].toLowerCase()) * 8;

        for(var i = 7; i > 1; i--){
            sum += input[length-i] * i;
        }

        var reminder = sum % 11;

        if(reminder != 0){
            reminder = 11 - reminder;
        }

        if(isLetter(input[length-1])){
            checkSum = charToInt(input[length-1].toLowerCase());
        }else{
            checkSum = input[length-1];
        }

        return checkSum == reminder;
    }else{
        return false;
    }
};

function isLetter(c) {
    return c.toLowerCase() != c.toUpperCase();
}

function charToInt(input){
    return input.charCodeAt(0)-87;
}

module.exports = hkidCheck;
